| 制作時期 |
| --- |
| 2021年2月～3月 |

[制作したWebアプリはこちら](https://fabomb.com/)

# 制作物

- トップページ

![トップページ](https://firebasestorage.googleapis.com/v0/b/portfolio-7d273.appspot.com/o/images%2Fbfaed80b-f18e-4fed-811a-be5d373f6c2e.png?alt=media&token=b64cede2-fc36-4075-bc47-b85d3bea277e)

- プロフィールページ

![プロフィールページ](https://firebasestorage.googleapis.com/v0/b/portfolio-7d273.appspot.com/o/images%2F6461089c-d490-4bc0-aa4c-316ef0e5f9b7.png?alt=media&token=fa6ce3f6-b367-46c6-928f-2d7d18c4edbb)

- 作品・ブログ記事一覧ページ

記事が一覧で表示される。また、ブログ記事の場合、登録されているタグから記事を検索することができる。

![作品・ブログ記事一覧ページ](https://firebasestorage.googleapis.com/v0/b/portfolio-7d273.appspot.com/o/images%2Ffe6cb404-5655-4343-b2ce-c5f2a0657462.png?alt=media&token=ec95580a-bc63-4907-83c7-ed35903b7fb9)

- 記事編集画面

記事をmarkdown記法で書くことができる。また、リアルタイムでプレビューを表示することで画面レイアウトを確認しながら記事を書くことができる。

他にもカテゴリやタグを作成・設定することができる。

![記事編集画面](https://firebasestorage.googleapis.com/v0/b/portfolio-7d273.appspot.com/o/images%2Fab4e15eb-0bf9-4f1d-8877-70de4d4d3193.png?alt=media&token=a3ccc044-9c64-44b8-bc55-b457f495a6e4)

- 管理者画面

管理者画面では、記事の編集・削除や公開設定ができる。

![管理者画面](https://firebasestorage.googleapis.com/v0/b/portfolio-7d273.appspot.com/o/images%2F1c096b15-44d0-40dc-b0fb-d299ee9032eb.png?alt=media&token=34586e58-0457-4451-9754-85053622d5a8)

# 制作目的

今まで制作してきたプロダクトを記録したり、日々の学びや思考をアウトプットする環境を作りたかった。

その際に、スマホからでも手軽に記事を作成できる環境を整え、アウトプットのハードルを下げるため、CMSの機能を実装する。

技術的な学び(インプット)と記事として発信すること(アウトプット)で自己の成長へつなげていきたい。

また、自分のこれまでの取り組みや考え方をより多くの人に届けることで新しい気づきや出会いに繋げていきたい。

~~(収益化が目的ではないため、SEO対策に注力していない)~~

# 技術的目的

このポートフォリオサイトは、CMSとして機能している。

CMSを実装する際に、これまで使用してきた技術でない新しい技術に挑戦したかった。

そこで今回はWasm(Rust)を用いてSPAの開発を進めた。

## なぜRustなのか

- 安全性

[前作(CraftMe)](https://fabomb.com/view_work/KdjwdMuOgh1mfl2031sR)を開発している際に、気づいたら変数がNullになってしまっている現象に悩まされた...(単純に自分の技術不足)

3Dモデリングの機能を実装するため、コンポーネント間のpropsの受け渡しが複雑になってしまう。そのため、気づいたら意図せぬ挙動になってしまうような状況があった。

そこで、静的型付け言語に着目した。Rustの他にも同じ静的型付け言語 であるGoも検討したが、Rustは、所有権やライフタイムなどの機能によりメモリを安全に管理することができる。

また、Nullの取り扱い方を明記する必要があるため、上記の問題解決に適していた。

- 実行速度

Rustは、GC(ガベージコレクション)を採用していないため、CやC++並の実行速度である。

今後、ブラウザ上で3Dモデルや動画、音声を取り扱う際に、速度面は重要になっていくと考える。

***

他にもRustの特徴はさまざまあるが主に以上の理由より今回の開発には、Rustを採用した。

正直、CMSの開発には上記のような性能は必要ないが今後、開発でRustを使用していきたいため学習目的で採用している。

また、Rustのコンパイラは非常に丁寧で参照の取り扱いや記述方法を丁寧に指摘してくれる。そのため、プログラミング自体の学習にもなった。

# 技術選定

今回は、今後運用していくことを考え、可能な限り費用を抑えたかった。そのため、ホスティングやDB、ストレージ管理に無料枠の機能が多いFirebaseを採用した。

|使用技術||
|---|---|
|フロントエンド|Yew(Rust FW)|
|ステート管理|Redux|
|ホスティング|Firebase Hosting |
|認証|Firebase Authentication|
|DB|Cloud Firestore|
|ストレージ| Cloud Storage for Firebase|

# 工夫した点

- 画像のリサイズ

Firebaseのストレージは、5GBまで無料である。なるべく、ストレージ容量を抑えるため画像保存する際に画像をリサイズし、圧縮をしてから保存する機能を実装した。

- markdownのリアルタイムプレビュー

markdown記法で記事作成しながらリアルタイムでプレビューできる機能を実装した。

~~この開発でRustの性能を発揮できる唯一の機能である笑~~

Jsと比較し、速度は4倍程度になった。

- ストレージ最適化

markdownで記述する際に画像を使用したい場合、ローカルからストレージにアップロードをしてそのURLをmarkdownに埋め込む。しかし、アップロードする機能しかないと必要でなくなった画像がそのままストレージに残ってしまう。

そこで、記事を投稿する際に、使用した画像URLと使用してないURLを判別し、使用してないURLを削除する機能を実装した。

# おわりに

自分のこれまでの取り組みを管理したりアウトプットする環境を社会人のなる前に整えることができた！

これからはどんどんアウトプットをして成長につなげていこうと思う。

また、開発にRustを使用したことでより深くプログラムの流れについて知ることができた。

Rustでwebアプリを開発するための日本語ドキュメントは少なかったため、相当苦労したがそのおかげで、公式ドキュメントやクレイト(ライブラリ)の実装を見て理解する習慣がついた。

深い階層までWasm経由でJsのモジュールをインポートできないなど、言語の開発仕様による問題なども多々あったがその問題に対する対応力も身についた。